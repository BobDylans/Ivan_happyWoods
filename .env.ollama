# Voice Agent System - Environment Configuration (Ollama 本地模型)
# Created: 2025-11-04
# DO NOT commit this file to Git!

# =============================================================================
# CORE LLM CONFIGURATION (Ollama 本地大模型)
# =============================================================================

# 🚀 Ollama 本地模型配置
VOICE_AGENT_LLM__API_KEY=ollama  # Ollama 不需要 API Key
VOICE_AGENT_LLM__BASE_URL=http://localhost:11434  # Ollama 服务地址（注意：不加 /v1）
VOICE_AGENT_LLM__PROVIDER=ollama

# 可用模型（根据 ollama list 查看已安装的模型）
VOICE_AGENT_LLM__MODELS__DEFAULT=qwen3:4b          # 默认模型（通义千问 3 代 4B 参数）
VOICE_AGENT_LLM__MODELS__FAST=qwen3:4b             # 快速模型
VOICE_AGENT_LLM__MODELS__CREATIVE=deepseek-r1:7b   # 创意模型（DeepSeek R1 7B 参数）

# LLM Performance Tuning
VOICE_AGENT_LLM__TIMEOUT=60      # 本地模型可能需要更长超时时间
VOICE_AGENT_LLM__MAX_TOKENS=4096  # Ollama 默认上下文长度
VOICE_AGENT_LLM__TEMPERATURE=0.7

# ⚠️ 重要：禁用代理设置（避免 localhost 请求被代理拦截）
HTTP_PROXY=
HTTPS_PROXY=
NO_PROXY=localhost,127.0.0.1

# =============================================================================
# PHASE 2B: VOICE SERVICES (iFlytek 科大讯飞)
# =============================================================================

# iFlytek Voice Recognition & Synthesis Credentials
IFLYTEK_APPID=c3f1e28b
IFLYTEK_APIKEY=33a21a73b46128bcab81ccfd1557308b
IFLYTEK_APISECRET=YjZiNjdlOTk0OTFlOGNiZjRiMjJlYjI0

# TTS Configuration (use same credentials as STT by default)
IFLYTEK_TTS_APPID=c3f1e28b
IFLYTEK_TTS_APIKEY=33a21a73b46128bcab81ccfd1557308b
IFLYTEK_TTS_APISECRET=YjZiNjdlOTk0OTFlOGNiZjRiMjJlYjI0

# Voice Service Preferences
VOICE_AGENT_SPEECH__TTS__PROVIDER=iflytek
VOICE_AGENT_SPEECH__TTS__VOICE=x5_lingxiaoxuan_flow
VOICE_AGENT_SPEECH__TTS__SPEED=50
VOICE_AGENT_SPEECH__TTS__FORMAT=mp3

VOICE_AGENT_SPEECH__STT__PROVIDER=iflytek
VOICE_AGENT_SPEECH__STT__LANGUAGE=zh
VOICE_AGENT_SPEECH__STT__DOMAIN=iat
VOICE_AGENT_SPEECH__STT__ACCENT=mandarin

# =============================================================================
# PHASE 3A: DATABASE CONFIGURATION (PostgreSQL)
# =============================================================================

# Enable database support
VOICE_AGENT_DATABASE__ENABLED=true

# PostgreSQL Connection
VOICE_AGENT_DATABASE__HOST=127.0.0.1
VOICE_AGENT_DATABASE__PORT=5432
VOICE_AGENT_DATABASE__DATABASE=voice_agent
VOICE_AGENT_DATABASE__USER=agent_user
VOICE_AGENT_DATABASE__PASSWORD=changeme123

# Database Pool Settings
VOICE_AGENT_DATABASE__POOL_SIZE=10
VOICE_AGENT_DATABASE__MAX_OVERFLOW=20
VOICE_AGENT_DATABASE__POOL_TIMEOUT=30
VOICE_AGENT_DATABASE__POOL_RECYCLE=3600

# Session Storage (切换到数据库存储)
VOICE_AGENT_SESSION__STORAGE_TYPE=database

# =============================================================================
# MCP TOOLS CONFIGURATION (Phase 2E-F)
# =============================================================================

# 启用的工具列表
VOICE_AGENT_TOOLS__ENABLED=search_tool,calculator,time_tool,weather_tool

# Tavily 搜索工具配置
VOICE_AGENT_TOOLS__SEARCH_TOOL__ENABLED=true
VOICE_AGENT_TOOLS__SEARCH_TOOL__API_KEY=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
VOICE_AGENT_TOOLS__SEARCH_TOOL__TIMEOUT=15
VOICE_AGENT_TOOLS__SEARCH_TOOL__MAX_RESULTS=10

# 独立的 Tavily API Key（方便直接访问）
TAVILY_API_KEY=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

# 计算器工具
VOICE_AGENT_TOOLS__CALCULATOR__ENABLED=true
VOICE_AGENT_TOOLS__CALCULATOR__TIMEOUT=5

# 时间工具
VOICE_AGENT_TOOLS__TIME_TOOL__ENABLED=true
VOICE_AGENT_TOOLS__TIME_TOOL__TIMEOUT=2

# 天气工具
VOICE_AGENT_TOOLS__WEATHER_TOOL__ENABLED=true
VOICE_AGENT_TOOLS__WEATHER_TOOL__TIMEOUT=10

# =============================================================================
# API AUTHENTICATION
# =============================================================================
API_KEY_ENABLED=true
API_KEYS=dev-test-key-123,admin-key-456

# =============================================================================
# JWT AUTHENTICATION (Phase 3B - User Login System)
# =============================================================================

# JWT Secret Key (Keep this secret!)
JWT_SECRET_KEY=a8b0036ba6c5834d44a3ec45067b5d45f468d69d317162abc3e3e9c753e7fb92
JWT_ALGORITHM=HS256

# Token Expiration Settings
JWT_ACCESS_TOKEN_EXPIRE_MINUTES=30    # Access token 有效期 30 分钟
JWT_REFRESH_TOKEN_EXPIRE_DAYS=7       # Refresh token 有效期 7 天

# Docker Compose PostgreSQL Password
POSTGRES_PASSWORD=12345678
