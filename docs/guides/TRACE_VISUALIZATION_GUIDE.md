# æ‰§è¡Œæµç¨‹å¯è§†åŒ–æŒ‡å—

**åŠŸèƒ½**: å®æ—¶å±•ç¤º AI åŠ©æ‰‹çš„æ€è€ƒå’Œæ‰§è¡Œè¿‡ç¨‹  
**ç‰ˆæœ¬**: 1.0.0  
**æ›´æ–°æ—¥æœŸ**: 2025-10-22

---

## ğŸ“– åŠŸèƒ½æ¦‚è¿°

æœ¬åŠŸèƒ½ä¸º Ivan_HappyWoods é¡¹ç›®æ·»åŠ äº†**æ‰§è¡Œæµç¨‹å¯è§†åŒ–**èƒ½åŠ›ï¼Œè®©å‰ç«¯ç”¨æˆ·èƒ½å¤Ÿå®æ—¶çœ‹åˆ° AI çš„æ€è€ƒè¿‡ç¨‹ï¼ŒåŒ…æ‹¬ï¼š

- ğŸ”„ **èŠ‚ç‚¹ç”Ÿå‘½å‘¨æœŸ**: å“ªä¸ªèŠ‚ç‚¹æ­£åœ¨æ‰§è¡Œã€å·²å®Œæˆã€è€—æ—¶å¤šä¹…
- ğŸ”€ **è·¯ç”±å†³ç­–**: AI å¦‚ä½•åœ¨ä¸åŒå¤„ç†é˜¶æ®µé—´è·³è½¬
- ğŸ”§ **å·¥å…·è°ƒç”¨**: è°ƒç”¨äº†å“ªäº›å·¥å…·ã€å‚æ•°ã€ç»“æœ
- ğŸ¤” **æ€è€ƒé˜¶æ®µ**: AI å½“å‰åœ¨åšä»€ä¹ˆï¼ˆå¦‚"å‡†å¤‡è°ƒç”¨"ã€"æ„å»ºæ¶ˆæ¯"ï¼‰
- â±ï¸ **æ€§èƒ½æŒ‡æ ‡**: å„é˜¶æ®µè€—æ—¶ã€æ€»è€—æ—¶

---

## ğŸ—ï¸ æ¶æ„è®¾è®¡

### ä¸¤å±‚äº‹ä»¶ç³»ç»Ÿ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     Graph å±‚äº‹ä»¶                         â”‚
â”‚  (è°ƒåº¦çº§åˆ« - èŠ‚ç‚¹ç”Ÿå‘½å‘¨æœŸã€è·¯ç”±å†³ç­–ã€å·¥ä½œæµçŠ¶æ€)            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â€¢ workflow_started    - å·¥ä½œæµå¼€å§‹                      â”‚
â”‚  â€¢ node_started        - èŠ‚ç‚¹å¼€å§‹æ‰§è¡Œ                     â”‚
â”‚  â€¢ node_finished       - èŠ‚ç‚¹å®Œæˆ (å«è€—æ—¶)                â”‚
â”‚  â€¢ route_decision      - è·¯ç”±å†³ç­– (ä»å“ªåˆ°å“ªã€åŸå› )         â”‚
â”‚  â€¢ workflow_complete   - å·¥ä½œæµå®Œæˆ (æ€»è€—æ—¶)              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     Node å±‚äº‹ä»¶                          â”‚
â”‚  (æ‰§è¡Œçº§åˆ« - å·¥å…·è°ƒç”¨ã€æ€è€ƒé˜¶æ®µã€LLM ç”Ÿæˆç»†èŠ‚)              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â€¢ thinking_phase      - æ€è€ƒé˜¶æ®µ (å¦‚"éªŒè¯è¾“å…¥")          â”‚
â”‚  â€¢ tool_call_pending   - å·¥å…·æ’é˜Ÿç­‰å¾…                     â”‚
â”‚  â€¢ tool_executing      - å·¥å…·æ‰§è¡Œä¸­                       â”‚
â”‚  â€¢ tool_result         - å·¥å…·ç»“æœ (æˆåŠŸ/å¤±è´¥ã€æ‘˜è¦ã€è€—æ—¶)  â”‚
â”‚  â€¢ llm_streaming       - LLM ç”Ÿæˆé˜¶æ®µ (ä¸ delta é…åˆ)     â”‚
â”‚  â€¢ token_usage         - Token ä½¿ç”¨ç»Ÿè®¡ (å¯é€‰)            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### äº‹ä»¶æ ¼å¼

æ‰€æœ‰äº‹ä»¶ç»Ÿä¸€æ ¼å¼ï¼š

```json
{
  "level": "graph" | "node",
  "type": "äº‹ä»¶ç±»å‹",
  "timestamp": 123.45,  // ç›¸å¯¹æ¯«ç§’æ•°ï¼ˆä»å·¥ä½œæµå¼€å§‹è®¡ç®—ï¼‰
  "session_id": "ä¼šè¯ID",
  "data": {
    // äº‹ä»¶ç‰¹å®šæ•°æ®
  }
}
```

---

## ğŸ”§ å®ç°ç»†èŠ‚

### 1. TraceEmitter ç±»

**ä½ç½®**: `src/agent/trace_emitter.py`

**èŒè´£**: ç»Ÿä¸€çš„äº‹ä»¶å‘å°„å™¨ï¼Œæä¾› Graph å’Œ Node å±‚äº‹ä»¶æ¥å£

**æ ¸å¿ƒæ–¹æ³•**:

#### Graph å±‚æ–¹æ³•
- `workflow_started(session_id, user_input)` - å·¥ä½œæµå¼€å§‹
- `node_started(node_name, session_id)` - èŠ‚ç‚¹å¼€å§‹
- `node_finished(node_name, session_id, duration_ms)` - èŠ‚ç‚¹å®Œæˆ
- `route_decision(from, to, reason, session_id)` - è·¯ç”±å†³ç­–
- `workflow_complete(session_id, total_duration_ms)` - å·¥ä½œæµå®Œæˆ

#### Node å±‚æ–¹æ³•
- `thinking_phase(phase, node_name, session_id, details)` - æ€è€ƒé˜¶æ®µ
- `tool_call_pending(tool_name, args, session_id)` - å·¥å…·æ’é˜Ÿ
- `tool_executing(tool_name, session_id)` - å·¥å…·æ‰§è¡Œä¸­
- `tool_result(tool_name, success, summary, session_id, duration_ms)` - å·¥å…·ç»“æœ
- `llm_streaming(phase, session_id, details)` - LLM ç”Ÿæˆé˜¶æ®µ

**ä½¿ç”¨ç¤ºä¾‹**:

```python
from agent.trace_emitter import TraceEmitter

# åˆ›å»ºå®ä¾‹
trace = TraceEmitter()

# å‘å°„äº‹ä»¶
event = trace.node_started("call_llm", "session-123")
# event = {
#   "level": "graph",
#   "type": "node_started",
#   "timestamp": 123.45,
#   "session_id": "session-123",
#   "data": {
#     "node": "call_llm",
#     "display_name": "è°ƒç”¨å¤§æ¨¡å‹"
#   }
# }
```

### 2. Graph å±‚æ”¹é€ 

**ä½ç½®**: `src/agent/graph.py`

**æ ¸å¿ƒä¿®æ”¹**: `process_message_stream()` æ–¹æ³•

```python
async def process_message_stream(self, ...):
    import time
    workflow_start_time = time.time()
    
    # å‘å°„å·¥ä½œæµå¼€å§‹äº‹ä»¶
    yield self.trace.workflow_started(session_id, user_input)
    
    # èŠ‚ç‚¹ 1: process_input
    yield self.trace.node_started("process_input", session_id)
    node_start_time = time.time()
    
    state = await self.nodes.process_input(initial_state)
    
    duration = (time.time() - node_start_time) * 1000
    yield self.trace.node_finished("process_input", session_id, duration)
    
    # è·¯ç”±å†³ç­–
    yield self.trace.route_decision("process_input", "call_llm", "è¾“å…¥éªŒè¯é€šè¿‡", session_id)
    
    # èŠ‚ç‚¹ 2: call_llm (æµå¼)
    yield self.trace.node_started("call_llm", session_id)
    # ... (æµå¼ LLM è°ƒç”¨ä¼šè‡ªåŠ¨å‘å°„ Node å±‚äº‹ä»¶)
    
    # å·¥ä½œæµå®Œæˆ
    total_duration = (time.time() - workflow_start_time) * 1000
    yield self.trace.workflow_complete(session_id, total_duration)
```

### 3. Node å±‚æ”¹é€ 

**ä½ç½®**: `src/agent/nodes.py`

**æ ¸å¿ƒä¿®æ”¹**: `stream_llm_call()` æ–¹æ³•

```python
async def stream_llm_call(self, messages, config, session_id=None):
    # æ€è€ƒé˜¶æ®µ
    if self.trace and session_id:
        yield self.trace.thinking_phase("å‡†å¤‡ LLM æµå¼è°ƒç”¨", "call_llm", session_id)
    
    # ... æµå¼è°ƒç”¨ LLM ...
    
    # æ£€æµ‹åˆ°å·¥å…·è°ƒç”¨
    if collected_tool_calls:
        if self.trace and session_id:
            yield self.trace.llm_streaming("æ£€æµ‹åˆ°å·¥å…·è°ƒç”¨", session_id, f"å…± {len(collected_tool_calls)} ä¸ªå·¥å…·")
        
        for tool_call in collected_tool_calls:
            # å·¥å…·æ’é˜Ÿ
            if self.trace and session_id:
                yield self.trace.tool_call_pending(tool_call.name, tool_call.arguments, session_id)
            
            # å·¥å…·æ‰§è¡Œä¸­
            if self.trace and session_id:
                yield self.trace.tool_executing(tool_call.name, session_id)
            
            tool_start_time = time.time()
            result = await self._execute_tool_call(tool_call)
            tool_duration = (time.time() - tool_start_time) * 1000
            
            # å·¥å…·ç»“æœ
            if self.trace and session_id:
                yield self.trace.tool_result(
                    tool_call.name, 
                    result.success, 
                    result_summary, 
                    session_id,
                    tool_duration
                )
```

### 4. å‰ç«¯å¯è§†åŒ–

**ä½ç½®**: `demo/chat_demo.html`

**æ–°å¢ CSS æ ·å¼**:
- `.workflow-timeline` - æ—¶é—´çº¿å®¹å™¨
- `.node-indicator` - èŠ‚ç‚¹çŠ¶æ€æŒ‡ç¤ºå™¨ (è¿è¡Œä¸­/å·²å®Œæˆ)
- `.tool-card` - å·¥å…·æ‰§è¡Œå¡ç‰‡
- `.thinking-phase` - æ€è€ƒé˜¶æ®µæç¤º
- `.route-decision` - è·¯ç”±å†³ç­–æŒ‡ç¤º
- `.workflow-complete` - å·¥ä½œæµå®Œæˆæ¨ªå¹…

**æ–°å¢ JavaScript å‡½æ•°**:

```javascript
// åˆ›å»ºæ—¶é—´çº¿
createTimelineContainer()

// èŠ‚ç‚¹çŠ¶æ€
showNodeStarted(nodeName, displayName)
showNodeFinished(nodeName, displayName, durationMs)

// è·¯ç”±å†³ç­–
showRouteDecision(from, to, reason)

// æ€è€ƒé˜¶æ®µ
showThinkingPhase(phase, details)

// å·¥å…·è°ƒç”¨
showToolPending(toolName, args)
showToolExecuting(toolName)
showToolResult(toolName, success, summary, durationMs)

// å·¥ä½œæµå®Œæˆ
showWorkflowComplete(totalDurationMs)
```

**äº‹ä»¶å¤„ç†**:

```javascript
async function handleStreamingResponse(response) {
    // ... è§£æ SSE æµ ...
    
    const data = JSON.parse(line.slice(5));
    
    // Graph å±‚äº‹ä»¶
    if (data.level === 'graph') {
        if (data.type === 'node_started') {
            showNodeStarted(data.data.node, data.data.display_name);
        } else if (data.type === 'node_finished') {
            showNodeFinished(data.data.node, data.data.display_name, data.data.duration_ms);
        }
        // ... å…¶ä»–äº‹ä»¶ ...
    }
    
    // Node å±‚äº‹ä»¶
    else if (data.level === 'node') {
        if (data.type === 'tool_executing') {
            showToolExecuting(data.data.tool);
        }
        // ... å…¶ä»–äº‹ä»¶ ...
    }
}
```

---

## ğŸ¨ å‰ç«¯å±•ç¤ºæ•ˆæœ

### æ—¶é—´çº¿è§†å›¾

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ â±ï¸ æ‰§è¡Œæµç¨‹                                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ğŸŸ¦ å¤„ç†è¾“å…¥           123ms         âœ“ å®Œæˆ      â”‚
â”‚    â†“ è¾“å…¥éªŒè¯é€šè¿‡ï¼Œå‡†å¤‡è°ƒç”¨å¤§æ¨¡å‹                  â”‚
â”‚ ğŸŸ¦ è°ƒç”¨å¤§æ¨¡å‹         1250ms        âœ“ å®Œæˆ      â”‚
â”‚    ğŸ¤” å‡†å¤‡ LLM æµå¼è°ƒç”¨                          â”‚
â”‚    ğŸ’¬ æ£€æµ‹åˆ°å·¥å…·è°ƒç”¨ - å…± 1 ä¸ªå·¥å…·                â”‚
â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚    â”‚ ğŸ”§ web_search              âœ“ æˆåŠŸ   â”‚     â”‚
â”‚    â”‚ å‚æ•°: {"query": "ç‰¹æœ—æ™®æ–°é—»"}       â”‚     â”‚
â”‚    â”‚ ç»“æœ: æ‰¾åˆ° 5 æ¡ç›¸å…³æ–°é—» (850ms)     â”‚     â”‚
â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â”‚    ğŸ’¬ åŸºäºå·¥å…·ç»“æœé‡æ–°æ€è€ƒ                       â”‚
â”‚ âœ… å·¥ä½œæµå®Œæˆ                æ€»è€—æ—¶: 1580ms     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### èŠ‚ç‚¹çŠ¶æ€é¢œè‰²

- **è¿è¡Œä¸­** (è“è‰²): ğŸŸ¦ èŠ‚ç‚¹åç§° | è¿è¡Œä¸­... (å¸¦åŠ¨ç”»)
- **å·²å®Œæˆ** (ç»¿è‰²): ğŸŸ© èŠ‚ç‚¹åç§° | 123ms | âœ“ å®Œæˆ
- **å¤±è´¥** (çº¢è‰²): ğŸŸ¥ èŠ‚ç‚¹åç§° | âœ— å¤±è´¥

### å·¥å…·å¡ç‰‡çŠ¶æ€

- **ç­‰å¾…æ‰§è¡Œ** (ç°è‰²): å·¥å…·åç§° | ç­‰å¾…æ‰§è¡Œ
- **æ‰§è¡Œä¸­** (é»„è‰²): å·¥å…·åç§° | æ‰§è¡Œä¸­... (å¸¦åŠ¨ç”»)
- **æˆåŠŸ** (ç»¿è‰²): å·¥å…·åç§° | âœ“ æˆåŠŸ + ç»“æœæ‘˜è¦
- **å¤±è´¥** (çº¢è‰²): å·¥å…·åç§° | âœ— å¤±è´¥ + é”™è¯¯ä¿¡æ¯

---

## ğŸ§ª æµ‹è¯•æ­¥éª¤

### 1. å¯åŠ¨æœåŠ¡

```bash
# ç¡®ä¿ç¯å¢ƒé…ç½®æ­£ç¡®
cd d:\iavnHappyWoods\Ivan_happyWoods

# å¯åŠ¨æœåŠ¡å™¨
python start_server.py

# æœŸæœ›è¾“å‡º
# INFO: è¯­éŸ³ä»£ç†åˆå§‹åŒ–æˆåŠŸ
# INFO: Uvicorn running on http://0.0.0.0:8000
```

### 2. æ‰“å¼€èŠå¤©ç•Œé¢

```bash
# æ–¹å¼ä¸€: ç›´æ¥åŒå‡»æ–‡ä»¶
# demo/chat_demo.html

# æ–¹å¼äºŒ: æµè§ˆå™¨è®¿é—®
# åœ¨æµè§ˆå™¨æ‰“å¼€æ–‡ä»¶: file:///d:/iavnHappyWoods/Ivan_happyWoods/demo/chat_demo.html
```

### 3. æµ‹è¯•åœºæ™¯

#### åœºæ™¯ 1: ç®€å•å¯¹è¯ (æ— å·¥å…·è°ƒç”¨)

**è¾“å…¥**: "ä½ å¥½ï¼Œä»‹ç»ä¸€ä¸‹ä½ è‡ªå·±"

**æœŸæœ›å¯è§†åŒ–**:
```
â±ï¸ æ‰§è¡Œæµç¨‹
ğŸŸ¦ å¤„ç†è¾“å…¥ â†’ âœ“ å®Œæˆ (50ms)
ğŸ”€ è¾“å…¥éªŒè¯é€šè¿‡ â†’ è°ƒç”¨å¤§æ¨¡å‹
ğŸŸ¦ è°ƒç”¨å¤§æ¨¡å‹ â†’ âœ“ å®Œæˆ (800ms)
ğŸ”€ LLM ç”Ÿæˆå®Œæˆ â†’ æ ¼å¼åŒ–å“åº”
âœ… å·¥ä½œæµå®Œæˆ (æ€»è€—æ—¶: 920ms)
```

#### åœºæ™¯ 2: å·¥å…·è°ƒç”¨

**è¾“å…¥**: "æœç´¢ç‰¹æœ—æ™®æœ€æ–°æ–°é—»"

**æœŸæœ›å¯è§†åŒ–**:
```
â±ï¸ æ‰§è¡Œæµç¨‹
ğŸŸ¦ å¤„ç†è¾“å…¥ â†’ âœ“ å®Œæˆ (45ms)
ğŸ”€ è¾“å…¥éªŒè¯é€šè¿‡ â†’ è°ƒç”¨å¤§æ¨¡å‹
ğŸŸ¦ è°ƒç”¨å¤§æ¨¡å‹
  ğŸ¤” å‡†å¤‡ LLM æµå¼è°ƒç”¨
  ğŸ’¬ æ£€æµ‹åˆ°å·¥å…·è°ƒç”¨ - å…± 1 ä¸ªå·¥å…·
  ğŸ”§ web_search
     ç­‰å¾…æ‰§è¡Œ â†’ æ‰§è¡Œä¸­... â†’ âœ“ æˆåŠŸ
     å‚æ•°: {"query": "ç‰¹æœ—æ™® Donald Trump latest news"}
     ç»“æœ: æ‰¾åˆ° 5 æ¡ç›¸å…³æ–°é—» (850ms)
  ğŸ’¬ åŸºäºå·¥å…·ç»“æœé‡æ–°æ€è€ƒ
âœ“ å®Œæˆ (2100ms)
âœ… å·¥ä½œæµå®Œæˆ (æ€»è€—æ—¶: 2350ms)
```

#### åœºæ™¯ 3: å¤šå·¥å…·è°ƒç”¨

**è¾“å…¥**: "æœç´¢å¤©æ°”å¹¶è®¡ç®— 123 * 456"

**æœŸæœ›å¯è§†åŒ–**:
```
â±ï¸ æ‰§è¡Œæµç¨‹
...
ğŸ”§ get_weather (âœ“ æˆåŠŸ, 200ms)
ğŸ”§ calculator (âœ“ æˆåŠŸ, 50ms)
...
```

### 4. éªŒè¯æ£€æŸ¥ç‚¹

- [ ] **æ—¶é—´çº¿æ˜¾ç¤º**: æ˜¯å¦å‡ºç°ç°è‰²æ—¶é—´çº¿å®¹å™¨ï¼Ÿ
- [ ] **èŠ‚ç‚¹çŠ¶æ€**: èŠ‚ç‚¹çŠ¶æ€æ˜¯å¦ä»"è¿è¡Œä¸­"(è“è‰²) â†’ "å·²å®Œæˆ"(ç»¿è‰²)ï¼Ÿ
- [ ] **èŠ‚ç‚¹è€—æ—¶**: æ˜¯å¦æ˜¾ç¤ºæ¯ä¸ªèŠ‚ç‚¹çš„è€—æ—¶ (ms)ï¼Ÿ
- [ ] **è·¯ç”±å†³ç­–**: æ˜¯å¦æ˜¾ç¤ºèŠ‚ç‚¹é—´çš„è·³è½¬ (ç®­å¤´ â†’)ï¼Ÿ
- [ ] **å·¥å…·å¡ç‰‡**: å·¥å…·è°ƒç”¨æ—¶æ˜¯å¦å‡ºç°å·¥å…·å¡ç‰‡ï¼Ÿ
- [ ] **å·¥å…·çŠ¶æ€**: å·¥å…·çŠ¶æ€æ˜¯å¦ä»"ç­‰å¾…" â†’ "æ‰§è¡Œä¸­" â†’ "æˆåŠŸ/å¤±è´¥"ï¼Ÿ
- [ ] **å·¥å…·å‚æ•°**: æ˜¯å¦æ˜¾ç¤ºå·¥å…·è°ƒç”¨å‚æ•°ï¼Ÿ
- [ ] **å·¥å…·ç»“æœ**: æ˜¯å¦æ˜¾ç¤ºå·¥å…·æ‰§è¡Œç»“æœæ‘˜è¦ï¼Ÿ
- [ ] **å·¥å…·è€—æ—¶**: æ˜¯å¦æ˜¾ç¤ºå·¥å…·æ‰§è¡Œè€—æ—¶ï¼Ÿ
- [ ] **æ€»è€—æ—¶**: å·¥ä½œæµç»“æŸæ—¶æ˜¯å¦æ˜¾ç¤ºæ€»è€—æ—¶ï¼Ÿ
- [ ] **åŠ¨ç”»æ•ˆæœ**: "è¿è¡Œä¸­"çŠ¶æ€æ˜¯å¦æœ‰è„‰å†²åŠ¨ç”»ï¼Ÿ
- [ ] **æ»šåŠ¨è¡Œä¸º**: æ—¶é—´çº¿æ›´æ–°æ—¶æ˜¯å¦è‡ªåŠ¨æ»šåŠ¨åˆ°åº•éƒ¨ï¼Ÿ

---

## ğŸ› å¸¸è§é—®é¢˜

### Q1: æ—¶é—´çº¿ä¸æ˜¾ç¤º

**åŸå› **: å¯èƒ½æ˜¯æµè§ˆå™¨æ§åˆ¶å°æœ‰ JavaScript é”™è¯¯

**è§£å†³**:
1. æ‰“å¼€æµè§ˆå™¨å¼€å‘è€…å·¥å…· (F12)
2. æŸ¥çœ‹ Console æ ‡ç­¾æ˜¯å¦æœ‰é”™è¯¯
3. æ£€æŸ¥ç½‘ç»œè¯·æ±‚æ˜¯å¦æˆåŠŸ (Network æ ‡ç­¾)
4. ç¡®è®¤ API URL å’Œ API Key é…ç½®æ­£ç¡®

### Q2: èŠ‚ç‚¹çŠ¶æ€ä¸æ›´æ–°

**åŸå› **: äº‹ä»¶å¯èƒ½æœªæ­£ç¡®å‘å°„

**è°ƒè¯•**:
1. æŸ¥çœ‹æµè§ˆå™¨ Consoleï¼Œæ˜¯å¦æœ‰æ—¥å¿—è¾“å‡ºï¼Ÿ
   - `ğŸ å·¥ä½œæµå¼€å§‹`
   - `ğŸŸ¦ èŠ‚ç‚¹å¼€å§‹: xxx`
   - `âœ… èŠ‚ç‚¹å®Œæˆ: xxx`
2. æŸ¥çœ‹æœåŠ¡å™¨æ—¥å¿—ï¼Œæ˜¯å¦æœ‰ `[Trace]` å¼€å¤´çš„æ—¥å¿—ï¼Ÿ
3. æ£€æŸ¥ `graph.py` ä¸­ `self.trace` æ˜¯å¦æ­£ç¡®åˆå§‹åŒ–

### Q3: å·¥å…·è°ƒç”¨ä¸æ˜¾ç¤º

**åŸå› **: å·¥å…·äº‹ä»¶æœªè§¦å‘æˆ–å‰ç«¯æœªå¤„ç†

**è°ƒè¯•**:
1. æŸ¥çœ‹ Console æ˜¯å¦æœ‰ `ğŸ”§ å·¥å…·è°ƒç”¨:` æ—¥å¿—
2. æ£€æŸ¥ `nodes.py` ä¸­ `stream_llm_call()` æ˜¯å¦æ­£ç¡®å‘å°„äº‹ä»¶
3. ç¡®è®¤ `data.level === 'node'` å’Œ `data.type === 'tool_executing'` é€»è¾‘

### Q4: æ—¶é—´çº¿æ€§èƒ½é—®é¢˜

**åŸå› **: é¢‘ç¹æ›´æ–°å¯¼è‡´é‡ç»˜

**ä¼˜åŒ–**:
1. ä½¿ç”¨ `requestAnimationFrame` èŠ‚æµæ»šåŠ¨
2. å‡å°‘ DOM æ“ä½œé¢‘ç‡
3. è€ƒè™‘ä½¿ç”¨è™šæ‹Ÿæ»šåŠ¨ (å¦‚äº‹ä»¶è¿‡å¤š)

---

## ğŸ“Š æ€§èƒ½æŒ‡æ ‡

### äº‹ä»¶æ•°é‡

| åœºæ™¯ | é¢„ä¼°äº‹ä»¶æ•° | å¤‡æ³¨ |
|------|-----------|------|
| ç®€å•å¯¹è¯ | ~6 ä¸ª | workflow_started + 2ä¸ªnode + 1ä¸ªroute + workflow_complete |
| å•å·¥å…·è°ƒç”¨ | ~12 ä¸ª | é¢å¤–: 1ä¸ªthinking + 3ä¸ªtooläº‹ä»¶ + 1ä¸ªllm_streaming |
| å¤šå·¥å…·è°ƒç”¨ (3ä¸ª) | ~20 ä¸ª | æ¯ä¸ªå·¥å…· 3ä¸ªäº‹ä»¶ |

### æ—¶é—´çº¿æ¸²æŸ“æ€§èƒ½

- **é¦–æ¬¡æ¸²æŸ“**: <10ms
- **èŠ‚ç‚¹æ›´æ–°**: <5ms
- **å·¥å…·å¡ç‰‡åˆ›å»º**: <5ms
- **æ€»å¼€é”€**: <1% CPU (æµå¼è¿‡ç¨‹ä¸­)

### ç½‘ç»œå¼€é”€

- **æ¯ä¸ªäº‹ä»¶å¤§å°**: ~200-500 bytes (JSON)
- **ç®€å•å¯¹è¯æ€»æµé‡**: ~2-3 KB
- **å·¥å…·è°ƒç”¨æ€»æµé‡**: ~5-10 KB

---

## ğŸ”® æœªæ¥ä¼˜åŒ–

### Phase 1 (å·²å®Œæˆ)
- [x] åŸºç¡€äº‹ä»¶ç³»ç»Ÿ
- [x] å‰ç«¯æ—¶é—´çº¿å¯è§†åŒ–
- [x] å·¥å…·è°ƒç”¨çŠ¶æ€å±•ç¤º

### Phase 2 (è®¡åˆ’ä¸­)
- [ ] äº‹ä»¶è¿‡æ»¤ (ç”¨æˆ·å¯é€‰æ‹©æ˜¾ç¤ºå“ªäº›äº‹ä»¶)
- [ ] æ—¶é—´çº¿å¯¼å‡º (JSON/CSV)
- [ ] æ€§èƒ½åˆ†æé¢æ¿ (ç“¶é¢ˆè¯†åˆ«)
- [ ] å†å²ä¼šè¯å¯è§†åŒ–å›æ”¾

### Phase 3 (æœªæ¥)
- [ ] å®æ—¶æ€§èƒ½å›¾è¡¨ (Token/s, è€—æ—¶è¶‹åŠ¿)
- [ ] å¤šä¼šè¯å¯¹æ¯”åˆ†æ
- [ ] AI ä¼˜åŒ–å»ºè®® (åŸºäºæ‰§è¡Œæ•°æ®)

---

## ğŸ“š ç›¸å…³æ–‡æ¡£

- [PROJECT.md](../PROJECT.md) - é¡¹ç›®æ€»è§ˆ
- [DEVELOPMENT.md](../DEVELOPMENT.md) - å¼€å‘æŒ‡å—
- [specs/001-voice-interaction-system/spec.md](../specs/001-voice-interaction-system/spec.md) - åŠŸèƒ½è§„æ ¼

---

## ğŸ¤ è´¡çŒ®æŒ‡å—

å¦‚éœ€æ·»åŠ æ–°çš„å¯è§†åŒ–åŠŸèƒ½ï¼š

1. **åç«¯**: åœ¨ `trace_emitter.py` æ·»åŠ æ–°äº‹ä»¶æ–¹æ³•
2. **Graph/Node å±‚**: åœ¨é€‚å½“ä½ç½®è°ƒç”¨ `self.trace.xxx()`
3. **å‰ç«¯ CSS**: åœ¨ `chat_demo.html` æ·»åŠ æ ·å¼
4. **å‰ç«¯ JS**: æ·»åŠ äº‹ä»¶å¤„ç†å‡½æ•°å’Œ DOM æ›´æ–°é€»è¾‘
5. **æ–‡æ¡£**: æ›´æ–°æœ¬æ–‡æ¡£å’Œ CHANGELOG.md

---

*æœ€åæ›´æ–°: 2025-10-22*  
*ç»´æŠ¤è€…: Ivan_HappyWoods Team*
